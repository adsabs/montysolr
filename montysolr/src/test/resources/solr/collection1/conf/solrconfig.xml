<?xml version="1.0" encoding="UTF-8" ?>
<config>
  <luceneMatchVersion>9.6.1</luceneMatchVersion>

  <dataDir>${solr.data.dir:}</dataDir>

  <directoryFactory name="DirectoryFactory"
                    class="${solr.directoryFactory:solr.NRTCachingDirectoryFactory}"/>
  <schemaFactory class="ClassicIndexSchemaFactory"/>

  <statsCache class="${solr.statsCache:}"/>

  <!-- The default high-performance update handler -->
  <updateHandler class="solr.DirectUpdateHandler2">
    <commitWithin>
      <softCommit>${solr.commitwithin.softcommit:true}</softCommit>
    </commitWithin>
    <updateLog></updateLog>
  </updateHandler>

  <query>
    <!-- Standard Solr 9 caches using Caffeine -->
    <filterCache
        class="solr.CaffeineCache"
        size="128"
        initialSize="128"
        autowarmCount="0"/>

    <queryResultCache
        class="solr.CaffeineCache"
        size="128"
        initialSize="128"
        autowarmCount="0"/>

    <documentCache
        class="solr.CaffeineCache"
        size="128"
        initialSize="128"
        autowarmCount="0"/>

    <!-- Citation cache - using our custom implementation -->
    <cache name="citations-cache"
         class="org.apache.solr.search.CitationLRUCache"
         size="128"
         initialSize="128"
         autowarmCount="0"
         identifierFields="bibcode:sorted,alternate_bibcode"
         citationFields="reference"
         referenceFields="reference"
         reuseCache="true"
         incremental="false" />
  </query>

  <!-- Request handlers -->
  <requestHandler name="/select" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <str name="wt">json</str>
      <str name="indent">true</str>
    </lst>
  </requestHandler>

</config>
